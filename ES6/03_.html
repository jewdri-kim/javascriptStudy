<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name ="format-detection" content ="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>03_이터레이터</title>
<style type="text/css">
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,textarea,p,blockquote,th,td,input,select,textarea,button {margin:0;padding:0}
a {color:#1b52b1;text-decoration:underline}
a:active, a:hover {text-decoration:underline}
li ul{padding-left:10px;}
h1 {font-size:25px;padding-top:10px;}
h2 {color:#000b72;font-size:22px;padding-bottom:10px;padding-top:10px;border-bottom:1px solid #d0d0d0;}
h3 {font-size:14px;padding:10px 20px;background:#d0d0d0;}
header h2 {margin-top:20px;font-size:14px;padding:10px 20px;background:#d0d0d0;color:#333;}
h4 {color:#000;padding:10px 20px;border:1px solid #d0d0d0;}

section {padding:10px;}
article {padding:20px;}
xmp {margin:2%;background:#f1f1f1;white-space:pre-line;padding:0 2% 1% 2%;}
pre{margin-bottom:20px;background:#000;white-space:pre-line;padding:1% 2% 1% 2%;color:#ff0;font-size:16px;font-family:tahoma;}
pre span{color:#fff;font-size:14px;}
header > div, section > div {margin-bottom:20px;border:1px solid #d0d0d0;padding:5px 30px;}
.colorscripter-code{border:0;padding:0;}
.colorscripter-code table{width:100%;}
.data_box table td{text-align:center;}
ul {padding:10px 0;}
ol {padding-left:20px;}
p {padding-top:10px;}
.btn_top{display:inline-block;position:fixed;bottom:10px;right:10px;width:50px;height:50px;line-height:50px;background:#d0d0d0;color:#000;text-align:center;}
footer{text-align:right;}
section em{display:block;color:#595;}
dl {background:#efefef;padding:20px;margin:10px 0;}
dl dt{font-weight:600;}
</style>
</head>
<body>
<div class="wrap guide_wrap">
	<header>
		<h1>03_이터레이터</h1>

		<h2>목차</h2>
		<div>
			<ol>
				<li><a href="#con1">1. ES6 심볼</a></li>
				<li><a href="#con2">2. 이터레이션 규약</a></li>
				<li><a href="#con3">3. 제네레이터</a></li>
				<li><a href="#con4">4.  for...of 루프</a></li>
				<li><a href="#con5">5. 꼬리 호출 최적화</a></li>
				<li><a href="#con7">7. 요약</a></li>
			</ol>
		</div>
	</header>
	<section>
	<div>
		ES6에는 새로운 이터레이션 객체 인터페이스, 루프가 도입됐다. <br>
		이 장은 먼저 심볼symbol과 Symbol 객체의 다양한 프로퍼티를 알아보고 함수호출이 중첩된 상태에서 실행스택 execution stack을 생성하는 원리와 성능/메모리 점유를 최적화 하는 기법을 소개한다. <br><br>
		심볼은 이터레이터와 별개의 주제이지만 이터레이션 규약은 심볼을 이용하여 구현하므로 같은 장에서 다룬다.
		<ul>
			<li>심볼을 객체 프로퍼티 키로 사용</li>
			<li>객체에 이터레이션 규약을 구현</li>
			<li>제너레이터 객체의 생성과 활용</li>
			<li>for...of 루프로 순회</li>
			<li>꼬리 호출 최적화</li>
		</ul>
	</div>
	<h2 id="con1">1. ES6 심볼</h2>
	<section>
		<div>
			심볼은 ES6에서 처음 선보인, 완전히 새로운 원시타입으로, 심볼값은 유일하며 변경할 수 없다. <br>
			다음은 심볼을 생성하는 코드다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">s</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">();</span>
			</pre>
		</div>
		<div>
			심볼은 리터럴 형식이 없고 Symbol() 함수로 생성한다. <br>
			이 함수는 호출할 떄마다 유일한 심볼을 반환한다. <br> <br>
			심볼에 관한 서술 description 문자열을 Symbol()에 선택 인자로 줄 수 있다. <br>
			심볼자체에 접근하려는 의도는 아니고 단지 디버깅 용이다. <br> <br>
			다시 말해, 다음 예제와 같이 서술이 동일해도 심볼까지 동등하진 않다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s1</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">window.</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;내 심볼&quot;</span><span style="color: #f8f8f2">);</span>
			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">window.</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;내 심볼&quot;</span><span style="color: #f8f8f2">);</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">s1</span> <span style="color: #f92672">===</span> <span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>
		<div>
			심볼은 다른 어느 값과도 충돌하지 않는 일종의 문자열 값이다.
		</div>

		<h3>typeof 연산자</h3>
		<div>
			심볼에 typeof 연산을 하면 결과는 "symbol" 이다. <br>
			어떤 변수가 심볼인지 알려면 typeof 연산자가 유일한 방법이다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">var</span> <span style="color: #a6e22e">s</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">();</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">typeof</span> <span style="color: #a6e22e">s</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>

		<h3>new 연산자</h3>
		<div>
			Symbol()에 new 연산자는 못 쓴다. <br>
			이 함수는 자신이 생성자로 사용된 것을 감지하면 예외를 던진다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">try</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">();</span>
			<span style="color: #f8f8f2">}</span><span style="color: #66d9ef">catch</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">message</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>
			</pre>
		</div>
		<div>
			그러나 자바스크립트 엔진은 내부적으로 객체의 심볼을 감싸기 위해 Symbol() 함수를 생성자로 사용한다. <br>
			즉, "s"는 Object(s)와 같다.
		</div>

		<h3>심볼을 프로퍼티 키로 사용</h3>
		<div>
			자바스크립트에서 객체의 프로퍼티 키는 보통 문자열 타입이었지만, ES6 부터는 문자열과 심볼 둘 다 가능하다. <br><br>
			심볼을 객체 프로퍼티 키로 사용한 예제를 보자.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>
			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s1</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>

			<span style="color: #f8f8f2">(</span><span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s2</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">();</span>
				<span style="color: #a6e22e">s1</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{[</span><span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&quot;내 심볼&quot;</span><span style="color: #f8f8f2">};</span>
				<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">]);</span>
				<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">==</span> <span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s1</span><span style="color: #f8f8f2">]);</span>
			<span style="color: #f8f8f2">})();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s1</span><span style="color: #f8f8f2">]);</span>
			</pre>
		</div>
		<div>
			심볼로 프로퍼티 키를 생성/조회할 때 []를 사용했다. <br>
			2장에서 []는 프로퍼티명 조합에 사용했는데, 심볼 프로퍼티 키에 접근할 때에도 이 기호를 쓴다.  <br>
			예제에서 s1, s2는 모두 동일한 심볼값을 가리킨다.
		</div>
		<dl>
			<dt>ES6 심볼이 등장한 가장 중요한 이유</dt>
			<dd>
				객체 프로퍼티 키로 사용해서 예기치 않게 프로퍼티키와 충돌하는 일을 방지하는 것
			</dd>
		</dl>

		<h3>Object.getOwnPropertySymbosl() 메소드</h3>
		<div>
			기존 Object.getOwnPropertyNames() 로는 심볼 프로퍼티를 조회할 수 없기 때문에 <br>
			객체의 심볼 프로퍼티를 배열로 가져오는 Object.getOwnPropertySymbols() 메소드가 고안됐다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">a</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">12</span><span style="color: #f8f8f2">};</span>
			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s1</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;내 심볼&quot;</span><span style="color: #f8f8f2">);</span>
			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s2</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;내 심볼&quot;</span><span style="color: #f8f8f2">);</span>

			<span style="color: #f8f8f2">Object.</span><span style="color: #a6e22e">defineProperty</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">s1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">enumerable</span> <span style="color: #f92672">:</span> <span style="color: #66d9ef">false</span>
			<span style="color: #f8f8f2">});</span>

			<span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;&quot;</span><span style="color: #f8f8f2">;</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(Object.</span><span style="color: #a6e22e">getOwnPropertySymbols</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">));</span>
			</pre>
		</div>
		<div>
			for...in  루프, Object.getOwnPropertyNames()로는 하위 호환성 보장 때문에 객체에서 심볼 프로퍼티를 찾을 수 없지만, in 연산자로는 가능하다.
		</div>

		<h3>Symbol.for(strong) 메소드</h3>
		<div>
			Symbol 객체는 키/값 쌍의 레지스트리registry 를 갖고 있다.(키는 심볼서술, 값은 심볼이다.)<br>
			Symbol.for()로 심볼을 찍어낼 때마다 레지스트리에 추가되고 이 메소드는 심볼을 반환한다. <br>
			이미 존재하는 서술로 심볼을 생성하면 기존 심볼을 그대로 반환한다. <br><br>
			Symbol.for()는 항상 전역범위의 심볼을 생성하므로 Symbol()보다 낫다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{};</span>

			<span style="color: #f8f8f2">(</span><span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
				<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s1</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;name&quot;</span><span style="color: #f8f8f2">);</span>
				<span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s1</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;수지&quot;</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">})();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s1</span><span style="color: #f8f8f2">]);</span>
			</pre>
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{};</span>

			<span style="color: #f8f8f2">(</span><span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">s2</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">.</span><span style="color: #66d9ef">for</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;age&quot;</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">s2</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">27</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">})();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">.</span><span style="color: #66d9ef">for</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;age&quot;</span><span style="color: #f8f8f2">)]);</span>
			</pre>
		</div>

		<h3>상용 심볼</h3>
		<div>
			ES6 에는 상용심볼 well-known symbol 이라는 내장 심볼 세트가 준비되어 있어서 꼭 직접 만들어 쓰지 않아도 된다. <br>
			그 중 많이 쓰는 심볼들은 다음과 같다. <br><br>
			<ul>
				<li>Symbol.iterator</li>
				<li>Symbol.match</li>
				<li>Symbol.search</li>
				<li>Symbol.replace</li>
				<li>Symbol.split</li>
				<li>Symbol.hasInstance</li>
				<li>Symbol.species</li>
				<li>Symbol.unscopables</li>
				<li>Symbol.isContcatSpreadable</li>
				<li>Symbol.toPrimitive</li>
				<li>Symbol.toStringTag</li>
			</ul><br><br>
			상용 심볼은 보통 앞에 @@를 붙여 표기한다. (예 : Symbol.iterator -> !!iterator).<br>
			이렇게 하면 상용 심볼을 구별하기가 훨씬 수월하다.
		</div>

	</section>

	<h2 id="con2">2. 이터레이션 규약</h2>
	<section>
		<div>
			이터레이션 규약은 루프, 생성자가 어떤 객체의 값들을 순회하기 위한 인터페이스 구현 규칙을 정리한 것이다.  <br>
			ES6는 이터러블 규약 iterable protocol과 이터레이터 규약 iterator protocol, 두 가지로 나누어 규정한다.
		</div>

		<h3>이터레이터 규약</h3>
		<div>
			이터레이터는 이터레이터 규약을 따르는 객체로, 그 다음 요소를 반환하는 next()메소드를 구현해야한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">array</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">4</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">],</span>
				<span style="color: #a6e22e">nextIndex</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span>
			 	<span style="color: #a6e22e">next</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
			 		<span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">nextIndex</span> <span style="color: #f92672">&lt;</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">array</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">length</span> <span style="color: #f92672">?</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">value</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">array</span><span style="color: #f8f8f2">[</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">nextIndex</span><span style="color: #f92672">++</span><span style="color: #f8f8f2">],</span> <span style="color: #a6e22e">done</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">}</span> <span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">done</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">};</span>
			 	<span style="color: #f8f8f2">}</span>
			<span style="color: #f8f8f2">};</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>
		<div>
			next()를 호출할 때마다 value 와 done, 두 프로퍼티로 구성된 객체를 반환한다. <br>
			이들의 의미는 다음과 같다. <br><br>

			<ul>
				<li>done : 이터레이터가 순회를 마치면 true, 아니면 false를 반환한다. </li>
				<li>value : 콜렉션의 현재 요소 값으로, done이 true이면 생략한다. </li>
			</ul>
		</div>


		<h3>이터러블 규약</h3>
		<div>
			이터러블은 이터러블 규약을 구현햔 객체로, 반드시 @@iterator 메소드를 제공한다. <br>
			즉, Symbol.iterator 심볼을 프로퍼티 키로 갖고 있으며, @@iterator 메소드는 항상 이터레이터 객체를 반환한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">obj</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">array</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">4</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">],</span>
				<span style="color: #a6e22e">nextIndex</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span>
				<span style="color: #f8f8f2">[</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">iterator</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
					<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">{</span>
						<span style="color: #a6e22e">array</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">array</span><span style="color: #f8f8f2">,</span>
						<span style="color: #a6e22e">nextIndex</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">nextIndex</span><span style="color: #f8f8f2">,</span>
						<span style="color: #a6e22e">next</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(){</span>
							<span style="color: #66d9ef">return</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">nextIndex</span> <span style="color: #f92672">&lt;</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">array</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">length</span> <span style="color: #f92672">?</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">value</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">array</span><span style="color: #f8f8f2">[</span><span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">nextIndex</span><span style="color: #f92672">++</span><span style="color: #f8f8f2">],</span> <span style="color: #a6e22e">done</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">}</span> <span style="color: #f92672">:</span> <span style="color: #f8f8f2">{</span><span style="color: #a6e22e">done</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">};</span>
						<span style="color: #f8f8f2">}</span>
					<span style="color: #f8f8f2">}</span>
				<span style="color: #f8f8f2">}</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">iterable</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">obj</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">iterator</span><span style="color: #f8f8f2">]();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>

	</section>

	<h2 id="con3">3. 제너레이터</h2>
	<section>
		<div>
			제너레이터 generator 는 평범한 함수처럼 생겼지만, 하나의 값만 반환하는 게 아니라 한번에 하나씩 여러 값을 반환하는 함수다. <br>
			이 함수를 호출하면 즉시 바디를 실행하지 않고 제너레이터 객체(즉 이터러블 + 이터레이터 프로토콜을 모두 구현한 객체)의 새 인스턴스를 반환한다.
			<br>
			제너레이터 객체는 제너레이터 함수의 새로운 실행 콘텍스트 execution context를 갖고, next()메소드를 실행하면 <br>
			제너레이터 함수 바디를 죽 실행하다가 yield  키워드를 만나면 바로 중지하고 yield값을 반환한다. <br>
			그리고 다시 next() 메소드를 부르면 멈춘 지점부터 실행이 재개되고 그 다음 yield 된 값을 낸다. <br>
			제너레이터 함수에 더 이상 yield 할 값이 남아있지 않을 때 done프로퍼티는 true가 된다. <br><br>
			제너레이터 함수는 function*으로 표기한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">4</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">generator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>

			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">iterable</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">[</span><span style="color: #a6e22e">Symbol</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">iterator</span><span style="color: #f8f8f2">]();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">iterable</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f92672">&lt;</span><span style="color: #960050; background-color: #1e0010">/script&gt;</span>
			</pre>
		</div>
		<div>
			제너레이터 함수는 이터러블 규약에 따라 yield 우측의 표현식에 해당하는 값을 반환한다. <br>
			표현식을 생략하면 반환값은 undefined다. 앞서 yield된 값이, 바로 이 표현식 값을 말한다. <br><br>
			next() 메소드는 선택 인자를 받아 제너레이터 함수가 멈춘 지점에서 yield 문의 반환값으로 지정할 수 있다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">a</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">12</span><span style="color: #f8f8f2">;</span>
				<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">b</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">yield</span> <span style="color: #a6e22e">a</span><span style="color: #f92672">+</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">c</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">yield</span> <span style="color: #a6e22e">b</span><span style="color: #f92672">+</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #a6e22e">c</span><span style="color: #f92672">+</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">generator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">11</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">78</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>

		<h3>return(value) 메소드</h3>
		<div>
			제너레이터 함수는 모든 값을 반환하기 전, 제너레이터 객체의 return()메소드에 마지막 반환값을 선택 인자로 넘겨 언제라도 도중 하차할 수 있다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">generator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #66d9ef">return</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">22</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">22</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>

		<h3>throw(exception) 메소드</h3>
		<div>
			제너레이터 함수 내에서 임의로 예외를 발생시키려면 제너레이터 객체의 throw() 메소드에 의해 예외 객체를 지정한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">try</span> <span style="color: #f8f8f2">{</span>
					<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">catch</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
					<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;첫번째 예외&quot;</span><span style="color: #f8f8f2">);</span>
				<span style="color: #f8f8f2">}</span>

				<span style="color: #66d9ef">try</span> <span style="color: #f8f8f2">{</span>
					<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">catch</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">e</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
					<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;두번째 예외&quot;</span><span style="color: #f8f8f2">);</span>
				<span style="color: #f8f8f2">}</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">generator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #66d9ef">throw</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;예외 문자열&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #66d9ef">throw</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;예외 문자열&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>

		<h3>yield* 키워드</h3>
		<div>
			제너레이터 함수 안에서 다른 이터러블 객체를 순회한 이후 그 값을 yield 하려면 yield* 키워드에 해당 표현식을 지정한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function_1</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function_2</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function_1</span><span style="color: #f8f8f2">();</span>
				<span style="color: #a6e22e">yield</span><span style="color: #f92672">*</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">];</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">generator</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">generator_function_2</span><span style="color: #f8f8f2">();</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">generator</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">next</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">done</span><span style="color: #f8f8f2">);</span>
			</pre>
		</div>
	</section>

	<h2 id="con4">4. for...of 루프</h2>
	<section>
		<div>
			이터러블 객체를 next()로 순회하는 건 불편하다. <br>
			그래서 ES6는 더 간편한 for...of 루프문을 제공한다. <br><br>
			for...of 루프는 이터러블 객체 값을 순회하는 구문이다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">function</span><span style="color: #f92672">*</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">4</span><span style="color: #f8f8f2">;</span>
				<span style="color: #a6e22e">yield</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">let</span> <span style="color: #a6e22e">arr</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">];</span>

			<span style="color: #66d9ef">for</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">value</span> <span style="color: #a6e22e">of</span> <span style="color: #a6e22e">generator_function</span><span style="color: #f8f8f2">())</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">for</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">let</span> <span style="color: #a6e22e">value</span> <span style="color: #a6e22e">of</span> <span style="color: #a6e22e">arr</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>
			</pre>
		</div>
	</section>

	<h2 id="con5">5. 꼬리 호출 최적화</h2>
	<section>
		<div>
			꼬리 호출 최적화 나온 배경 <br>
			어떤 함수를 호출하면 메모리에 실행 스택을 생성하여 함수의 변수를 저장한다. <br><br>
			함수 안에서 다른 함수를 호출해도 실행 스택이 새로 생성된다.  <br>
			내부 함수가 실행을 끝내고 자신을 호출한 함수를 재개하려면 그 주소를 어딘가에 보관해야 하므로 실행 스택만큼 메모리를 더 점유한다는게 문제다.  <br>
			그렇다고 실행 스택을 교환switch 하여 생성하면  CPU 시간이소비된다.  <br>
			중첩수준이 몇 단계 정도면 별문제 아니지만, 수백 단계에 이르게 되면 자바스크립트 엔진이 RengeError: Maximum call stack size exceeded 예외를 던지며 문제가 된다. -> 재귀함수 돌리면서 이런 메시지가 ... <br> <br>
			<strong>꼬리호출</strong>은 무조건 함수 끝에서  return문을 실행하도록 함수를 호출하는 기법이다.  <br>
			똑같은 함수호출이 꼬리에 꼬리를 물고 이어지는, 꼬리 재귀 tail recursion 는 재귀의 특수한 형태다.<br>
			꼬리호출을 하면 실행 스택을 새로 만들지 않고 기존 스택을 재사용할 수 있기 때문에 부가적인 CPU연산과 메모리 점유가 실제로 잘생하지 않는다. <br> <br>
			<strong>꼬리 호출 최적화 tail call optimization는 실행 스택을 재활용하는 것이다.</strong>
		</div>

		<div>
			ES6 부터는 "use strict"모드 실행하면 꼬리 호출 최적화를 자동으로 수행한다.
		</div>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #e6db74">&quot;use strict&quot;</span><span style="color: #f8f8f2">;</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">x</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">add1</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">x</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">);</span>
				<span style="color: #a6e22e">y</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>

				<span style="color: #75715e">//꼬리호출</span>
				<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">add2</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">x</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">);</span>
				<span style="color: #a6e22e">y</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>

				<span style="color: #75715e">//꼬리호출아님</span>
				<span style="color: #66d9ef">return</span> <span style="color: #ae81ff">0</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">add1</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;1&#39;</span><span style="color: #f8f8f2">));</span>
			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">add2</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;2&#39;</span><span style="color: #f8f8f2">));</span>
			</pre>
		</div>
		<div>
			_add1() 함수의 _add()는 add() 함수의 마지막 실행 코드이므로 꼬리호출이 맞지만, add2() 함수는 마지막 실행부에 _add()의 결과값에 0을 더하는 연산이 있어서 꼬리호출이 아니다.
		</div>

		<h3>꼬리 호출 아닌 코드를 꼬리 호출로 전환</h3>
		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #e6db74">&quot;use strict&quot;</span><span style="color: #f8f8f2">;</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">x</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
				<span style="color: #a6e22e">x</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">);</span>
				<span style="color: #a6e22e">y</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>

				<span style="color: #66d9ef">var</span> <span style="color: #a6e22e">result</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>
				<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">result</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">add</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span><span style="color: #e6db74">&#39;1&#39;</span><span style="color: #f8f8f2">));</span>
			</pre>
		</div>

		<!-- HTML generated using hilite.me -->
		<div style="background: #272822; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
			<pre style="margin: 0; line-height: 125%"><span style="color: #e6db74">&quot;use strict&quot;</span><span style="color: #f8f8f2">;</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">x</span> <span style="color: #f92672">+</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">;</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #66d9ef">function</span> <span style="color: #a6e22e">add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">y</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
			<span style="color: #a6e22e">x</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">);</span>
			<span style="color: #a6e22e">y</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">parseInt(</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>

			<span style="color: #66d9ef">return</span> <span style="color: #a6e22e">_add</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">x</span><span style="color: #f8f8f2">,</span><span style="color: #a6e22e">y</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>

			<span style="color: #a6e22e">console</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">add</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span><span style="color: #e6db74">&#39;1&#39;</span><span style="color: #f8f8f2">));</span>
			</pre>
		</div>
	</section>

	<h2 id="con6">6. 요약</h2>
	<div>
		이 장에서는 심볼을 이용하여 객체 프로퍼티 키를 생성하는 방법을 배웠다. <br>
		이터레이터/이터러블 규약이 무엇이고 이들을 일반 사용자 객체에서 활용하는 모습과, for...of 루프로 이터러블 객체를 순회하는 것을 살펴보았다.<br>
		끝으로, ES6의 꼬리호출 최적화에 대해 공부했다.
	</div>

	</section>
	<a href="#" class="btn_top">TOP</a>
	<footer>
		<address>Jewdri . 출처 : ECMSScript 6 길들이기 : 최신 표준으로 다시 배우는 자바스크립트 프로그래밍</address>
	</footer>
</div>
</body>
</html>